(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{1272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(6514),o=r(5834),s=r(6456),n=r.n(s),l=r(5129);function i(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)([]),[i,d]=(0,o.useState)(null),[c,m]=(0,o.useState)(null),[g,x]=(0,o.useState)(!0),[u,h]=(0,o.useState)(!1),[b,p]=(0,o.useState)(0);(0,o.useEffect)(()=>{f()},[b]);let f=async()=>{try{let[e,r]=await Promise.all([l.Er.getAllBookings(),l.Er.getAllUsers()]);"success"===e.status&&t(e.data.bookings),"success"===r.status&&s(r.data.users)}catch(e){console.error("Error loading data:",e)}finally{x(!1)}},y=async r=>{if(confirm("Are you sure you want to delete this booking?"))try{let a=await l.Er.deleteBooking(r);"success"===a.status?(t(e.filter(e=>e._id!==r)),p(e=>e+1)):alert(a.message||"Failed to delete booking")}catch(e){console.error("Error deleting booking:",e),alert("Failed to delete booking")}},j=async r=>{if(r.preventDefault(),i&&c)try{let r={...c,startTime:new Date(c.startTime).toISOString(),endTime:new Date(c.endTime).toISOString()},a=await l.Er.updateBooking(i._id,r);"success"===a.status?(t(e.map(e=>e._id===i._id?a.data.booking:e)),h(!1),d(null),m(null),p(e=>e+1)):alert(a.message||"Failed to update booking")}catch(e){console.error("Error updating booking:",e),alert("Failed to update booking")}},N=(e,t)=>{c&&m(r=>({...r,contactPerson:{...r.contactPerson,[e]:t}}))};return g?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#f37121] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Loading Admin Dashboard..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white p-6",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-[#f37121]/10 via-transparent to-[#f37121]/5 blur-3xl pointer-events-none"}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-6 mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#f37121] to-orange-500 bg-clip-text text-transparent",children:"Admin Dashboard"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)("button",{onClick:()=>{x(!0),p(e=>e+1)},className:"bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl border border-gray-500/50",children:"Refresh Data"}),(0,a.jsx)(n(),{href:"/meeting-room",className:"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl border border-blue-500/50 text-center",children:"Back to Meeting Room"}),(0,a.jsx)(n(),{href:"/user-management",className:"bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl border border-green-500/50",children:"Manage Users"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-[#2d2d2d] p-6 rounded-2xl shadow-lg border border-gray-700 hover:border-[#f37121]/40 transition-all duration-300",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Total Bookings"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-[#f37121]",children:e.length})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-[#2d2d2d] p-6 rounded-2xl shadow-lg border border-gray-700 hover:border-green-500/40 transition-all duration-300",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Total Users"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-400",children:r.length})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-[#2d2d2d] p-6 rounded-2xl shadow-lg border border-gray-700 hover:border-blue-500/40 transition-all duration-300",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Small Room Bookings"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:e.filter(e=>"small"===e.roomType).length})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-[#2d2d2d] p-6 rounded-2xl shadow-lg border border-gray-700 hover:border-orange-400/40 transition-all duration-300",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Large Room Bookings"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-orange-400",children:e.filter(e=>"large"===e.roomType).length})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-xl overflow-hidden border border-gray-700 mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-700 bg-gray-800/50",children:(0,a.jsx)("h2",{className:"text-xl font-semibold text-[#f37121]",children:"All Bookings"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-800/80",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Company & Contact"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Time & Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Room & Attendees"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Booked By"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-gray-800/50 divide-y divide-gray-700",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-700/50 transition-colors duration-200",children:[(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:e.contactPerson.company}),(0,a.jsx)("div",{className:"text-sm text-gray-300",children:e.contactPerson.name}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:e.contactPerson.phone})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:new Date(e.startTime).toLocaleDateString()}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:[new Date(e.startTime).toLocaleTimeString()," - ",new Date(e.endTime).toLocaleTimeString()]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("large"===e.roomType?"bg-blue-900/50 text-blue-300 border-blue-700/50":"bg-green-900/50 text-green-300 border-green-700/50"),children:e.roomName||("small"===e.roomType?"Small Room":"Large Room")}),(0,a.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-900/50 text-green-300 border border-green-700/50",children:[e.numberOfAttendees," people"]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-sm text-white",children:e.user.fullName}),(0,a.jsxs)("div",{className:"text-sm text-gray-300",children:["@",e.user.username]}),(0,a.jsx)("div",{className:"text-sm text-gray-400 capitalize",children:e.user.role})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("confirmed"===e.status?"bg-green-900/50 text-green-300 border border-green-700/50":"bg-red-900/50 text-red-300 border border-red-700/50"),children:e.status})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,a.jsx)("button",{onClick:()=>(e=>{d(e);let t=e=>new Date(e).toISOString().slice(0,16);m({startTime:t(e.startTime),endTime:t(e.endTime),numberOfAttendees:e.numberOfAttendees,contactPerson:e.contactPerson,roomType:e.roomType}),h(!0)})(e),className:"text-[#f37121] hover:text-orange-400 mr-4 transition-colors duration-200",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>y(e._id),className:"text-red-400 hover:text-red-300 transition-colors duration-200",children:"Delete"})]})]},e._id))})]})})]}),u&&i&&c&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-2xl border border-gray-700 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold bg-gradient-to-r from-[#f37121] to-orange-500 bg-clip-text text-transparent",children:"Edit Booking"}),(0,a.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-[#f37121] text-2xl font-bold transition-colors duration-200",children:"\xd7"})]}),(0,a.jsxs)("form",{onSubmit:j,className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),(0,a.jsx)("input",{type:"datetime-local",value:c.startTime,onChange:e=>m({...c,startTime:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Time"}),(0,a.jsx)("input",{type:"datetime-local",value:c.endTime,onChange:e=>m({...c,endTime:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Room Type"}),(0,a.jsxs)("select",{value:c.roomType||"small",onChange:e=>m({...c,roomType:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",children:[(0,a.jsx)("option",{value:"small",children:"Small Room"}),(0,a.jsx)("option",{value:"large",children:"Large Room"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Attendees"}),(0,a.jsx)("input",{type:"number",value:c.numberOfAttendees,onChange:e=>m({...c,numberOfAttendees:parseInt(e.target.value)}),min:"1",max:"small"===c.roomType?"10":"30",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]}),(0,a.jsxs)("div",{className:"border-t border-gray-700 pt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-[#f37121] mb-4",children:"Contact Person"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:c.contactPerson.name,onChange:e=>N("name",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",value:c.contactPerson.phone,onChange:e=>N("phone",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Company"}),(0,a.jsx)("input",{type:"text",value:c.contactPerson.company,onChange:e=>N("company",e.target.value),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#f37121] focus:border-transparent text-white transition-all duration-200",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-[#f37121] to-orange-500 hover:from-[#e5651a] hover:to-orange-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl",children:"Update Booking"}),(0,a.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-700 hover:bg-gray-600 text-white font-medium py-3 px-4 rounded-lg transition-all duration-200 border border-gray-600 hover:border-gray-500",children:"Cancel"})]})]})]})})]})]})}},5129:(e,t,r)=>{"use strict";r.d(t,{Bn:()=>s,Er:()=>n,R2:()=>o});let a="http://localhost:5001/api",o={login:async(e,t)=>(await fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})).json()},s={getAll:async e=>{let t=localStorage.getItem("token"),r=e?"".concat(a,"/bookings?roomType=").concat(e):"".concat(a,"/bookings");return(await fetch(r,{headers:{Authorization:"Bearer ".concat(t)}})).json()},create:async e=>{let t=localStorage.getItem("token");return(await fetch("".concat(a,"/bookings"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)})).json()},getAvailable:async(e,t)=>{let r=localStorage.getItem("token"),o=t?"".concat(a,"/bookings/available?date=").concat(e,"&roomType=").concat(t):"".concat(a,"/bookings/available?date=").concat(e);return(await fetch(o,{headers:{Authorization:"Bearer ".concat(r)}})).json()},getAvailableRooms:async()=>{let e=localStorage.getItem("token");return(await fetch("".concat(a,"/bookings/available-rooms"),{headers:{Authorization:"Bearer ".concat(e)}})).json()}},n={getAllBookings:async()=>{let e=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/bookings"),{headers:{Authorization:"Bearer ".concat(e)}})).json()},updateBooking:async(e,t)=>{let r=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/bookings/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)})).json()},deleteBooking:async e=>{let t=localStorage.getItem("token"),r=await fetch("".concat(a,"/admin/bookings/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(204===r.status)return{status:"success",data:null};try{return await r.json()}catch(e){return{status:"error",message:"Failed to delete booking"}}},getAllUsers:async()=>{let e=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/users"),{headers:{Authorization:"Bearer ".concat(e)}})).json()},createUser:async e=>{let t=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/users"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)})).json()},updateUser:async(e,t)=>{let r=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/users/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)})).json()},updateUserPermissions:async(e,t)=>{let r=localStorage.getItem("token");return(await fetch("".concat(a,"/admin/users/").concat(e,"/permissions"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(t)})).json()},deleteUser:async e=>{let t=localStorage.getItem("token"),r=await fetch("".concat(a,"/admin/users/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(204===r.status)return{status:"success",data:null};try{return await r.json()}catch(e){return{status:"error",message:"Failed to delete user"}}}}},5158:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-dashboard",function(){return r(1272)}])}},e=>{e.O(0,[456,636,593,792],()=>e(e.s=5158)),_N_E=e.O()}]);